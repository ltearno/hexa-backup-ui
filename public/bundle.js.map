{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/audio-panel.js","webpack:///./public/auth.js","webpack:///./public/files-panel.js","webpack:///./public/index.js","webpack:///./public/network.js","webpack:///./public/rest.js","webpack:///./public/search-panel.js","webpack:///./public/templates.js","webpack:///./public/ui-tool.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA,CAAc;AACd,8CAA8C,cAAc;AAC5D,oBAAoB,mBAAO,CAAC,0CAAa;AACzC,aAAa,mBAAO,CAAC,gCAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,SAAS;AAC1B,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B,OAAO,IAAI,gBAAgB,SAAS;AAC7G;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,yBAAyB;AACpH;AACA;AACA;AACA;AACA,sCAAsC,MAAM,mBAAmB,uDAAuD,IAAI,KAAK;AAC/H;AACA;AACA;AACA,uC;;;;;;;;;;;;AC1JA,CAAc;AACd,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,sCAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G,4BAA4B,eAAe,GAAG;AAC5J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,IAAI;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;;;;;ACxCA,CAAc;AACd,8CAA8C,cAAc;AAC5D,oBAAoB,mBAAO,CAAC,0CAAa;AACzC;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe;AACtD,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qFAAqF,OAAO;AAC5F;AACA;AACA,KAAK;AACL;AACA,uC;;;;;;;;;;;;AC1BA,CAAc;AACd,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,sCAAW;AAClC,oBAAoB,mBAAO,CAAC,gDAAgB;AAC5C,mBAAmB,mBAAO,CAAC,8CAAe;AAC1C,mBAAmB,mBAAO,CAAC,8CAAe;AAC1C,aAAa,mBAAO,CAAC,gCAAQ;AAC7B,aAAa,mBAAO,CAAC,gCAAQ;AAC7B,kBAAkB,mBAAO,CAAC,0CAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA,SAAS,sBAAsB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sCAAsC,eAAe,KAAK;AAC9F,oCAAoC,KAAK;AACzC,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD,iC;;;;;;;;;;;;AClEA,CAAc;AACd,8CAA8C,cAAc;AAC5D;AACA;AACA,wCAAwC,yBAAyB;AACjE;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD;AACA,KAAK;AACL;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD;AACA,KAAK;AACL;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD;AACA,KAAK;AACL;AACA;AACA;AACA,mC;;;;;;;;;;;;ACvEA,CAAc;AACd,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,sCAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oCAAoC,6BAA6B,6BAA6B;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;;;;;ACrBA,CAAc;AACd,8CAA8C,cAAc;AAC5D,oBAAoB,mBAAO,CAAC,0CAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B,sBAAsB,eAAe;AACrC;AACA,yEAAyE;AACzE;AACA,mEAAmE,eAAe;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;;;;;;AC9BA,CAAc;AACd,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,sCAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qC;;;;;;;;;;;;AC1CA,CAAc;AACd,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./public/index.js\");\n","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst templates_1 = require(\"./templates\");\nconst Rest = require(\"./rest\");\nconst PLAYER = 'player';\nconst PLAYLIST = 'playlist';\nconst EXPANDER = 'expander';\nconst templateHtml = `\n<div class=\"audio-footer mui-panel\">\n    <div x-id=\"${PLAYLIST}\" class=\"is-fullwidth mui--text-center\"></div>\n    <div x-id=\"${EXPANDER}\" class=\"onclick mui--text-center\">☰</div>\n    <audio x-id=\"${PLAYER}\" class=\"audio-player\" class=\"mui--pull-right\" controls preload=\"metadata\"></audio>\n</div>`;\nexports.audioPanel = {\n    create: () => templates_1.createTemplateInstance(templateHtml),\n    play: (elements, name, sha, mimeType) => {\n        elements.player.setAttribute('src', `${Rest.HEXA_BACKUP_BASE_URL}/sha/${sha}/content?type=${mimeType}`);\n        elements.player.setAttribute('type', mimeType);\n        elements.player.play();\n        elements.root.classList.remove(\"is-hidden\");\n    },\n};\nclass AudioJukebox {\n    constructor(audioPanel) {\n        this.audioPanel = audioPanel;\n        this.largeDisplay = false;\n        this.queue = [];\n        this.currentIndex = -1;\n        try {\n            let queue = JSON.parse(localStorage.getItem('playlist-backup'));\n            if (queue && queue instanceof Array)\n                this.queue = queue;\n        }\n        catch (err) {\n            console.error(`error`, err);\n        }\n        this.audioPanel.player.addEventListener('ended', () => {\n            this.playNext();\n        });\n        this.audioPanel.expander.addEventListener('click', () => {\n            this.largeDisplay = !this.largeDisplay;\n            this.refreshPlaylist();\n        });\n        this.audioPanel.root.addEventListener('click', event => {\n            const { element, childIndex } = templates_1.templateGetEventLocation(this.audioPanel, event);\n            if (element == this.audioPanel.playlist && childIndex >= 0) {\n                let queueIndex = element.children.item(childIndex).getAttribute('x-queue-index');\n                if (queueIndex && queueIndex.length)\n                    this.play(parseInt(queueIndex));\n                if (event.target == this.audioPanel.playlist.querySelector(`[x-id='clear-playlist']`)) {\n                    let currentItem = this.currentItem();\n                    if (currentItem) {\n                        this.queue = [currentItem];\n                        this.currentIndex = 0;\n                    }\n                    else {\n                        this.queue = [];\n                    }\n                    localStorage.removeItem('playlist-backup');\n                    this.refreshPlaylist();\n                }\n            }\n        });\n        this.refreshPlaylist();\n    }\n    currentItem() {\n        if (this.currentIndex < 0 || this.currentIndex >= this.queue.length)\n            return null;\n        return this.queue[this.currentIndex];\n    }\n    addAndPlay(item) {\n        item = {\n            sha: item.sha,\n            name: item.name,\n            mimeType: item.mimeType\n        };\n        let currentItem = this.currentItem();\n        if (currentItem && currentItem.sha == item.sha)\n            return;\n        this.pushQueueAndPlay(item);\n    }\n    playNext() {\n        if (this.currentIndex + 1 < this.queue.length) {\n            this.play(this.currentIndex + 1);\n        }\n        else if (this.itemUnroller) {\n            let item = this.itemUnroller.unroll();\n            if (item) {\n                if (!this.itemUnroller.hasNext())\n                    this.itemUnroller = null;\n                this.pushQueueAndPlay(item);\n            }\n            else {\n                this.itemUnroller = null;\n                this.refreshPlaylist();\n            }\n        }\n    }\n    setItemUnroller(itemUnroller) {\n        this.itemUnroller = itemUnroller;\n        this.refreshPlaylist();\n    }\n    pushQueueAndPlay(item) {\n        this.queue.push(item);\n        localStorage.setItem('playlist-backup', JSON.stringify(this.queue));\n        this.play(this.queue.length - 1);\n    }\n    play(index) {\n        this.currentIndex = index;\n        if (this.currentIndex < 0)\n            this.currentIndex = -1;\n        this.refreshPlaylist();\n        if (index >= 0 && index < this.queue.length) {\n            const item = this.queue[index];\n            exports.audioPanel.play(this.audioPanel, item.name, item.sha, item.mimeType);\n        }\n    }\n    refreshPlaylist() {\n        if (this.refreshTimer)\n            clearTimeout(this.refreshTimer);\n        this.refreshTimer = setTimeout(() => this.realRefreshPlaylist(), 10);\n    }\n    realRefreshPlaylist() {\n        if (!this.queue || !this.queue.length) {\n            if (this.largeDisplay)\n                this.audioPanel.playlist.innerHTML = '<span class=\"mui--text-dark-secondary\">There are no items in your playlist. Click on songs to play them.</span>';\n            else\n                this.audioPanel.playlist.innerHTML = '';\n            return;\n        }\n        if (this.largeDisplay) {\n            let html = `<h3>Playlist</h3>`;\n            for (let i = 0; i < this.queue.length; i++) {\n                let item = this.queue[i];\n                html += this.playlistItemHtml(i, item.name);\n            }\n            this.audioPanel.playlist.innerHTML = html;\n        }\n        else {\n            if (this.currentIndex >= 0 && this.currentIndex < this.queue.length)\n                this.audioPanel.playlist.innerHTML = this.playlistItemHtml(this.currentIndex, this.queue[this.currentIndex].name);\n            else\n                this.audioPanel.playlist.innerHTML = \"\";\n        }\n        if (this.itemUnroller && this.itemUnroller.hasNext())\n            this.audioPanel.playlist.innerHTML += `<div class=\"mui--text-dark-secondary\">${this.itemUnroller.name()}</div>`;\n        if (this.largeDisplay)\n            this.audioPanel.playlist.innerHTML += `<div class=\"mui--text-dark-secondary\"><a x-id='clear-playlist' href='#'>clear playlist</a></div>`;\n    }\n    playlistItemHtml(index, name) {\n        return `<div x-queue-index=\"${index}\" class=\"onclick ${index == this.currentIndex ? 'mui--text-headline' : ''}\">${name}</div>`;\n    }\n}\nexports.AudioJukebox = AudioJukebox;\n//# sourceMappingURL=audio-panel.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Network = require(\"./network\");\nfunction wait(duration) {\n    return new Promise(resolve => setTimeout(resolve, duration));\n}\nclass Auth {\n    onError() {\n        window.location.reload();\n    }\n    async loop() {\n        while (true) {\n            try {\n                let response = await Network.postData(`https://home.lteconsulting.fr/auth`);\n                if (response && response.token) {\n                    let res = await Network.getData(`https://home.lteconsulting.fr/well-known/v1/setCookie`, { 'Authorization': `Bearer ${response.token}` });\n                    if (!res || !res.lifetime) {\n                        console.error(`cannot setCookie`, res);\n                        this.onError();\n                    }\n                }\n                else {\n                    console.error(`cannot obtain auth token`);\n                    this.onError();\n                }\n            }\n            catch (err) {\n                console.error(`cannot refresh auth (${err})`);\n                this.onError();\n            }\n            // every 30 minutes\n            await wait(1000 * 60 * 30);\n        }\n    }\n}\nfunction autoRenewAuth() {\n    let auth = new Auth();\n    auth.loop();\n}\nexports.autoRenewAuth = autoRenewAuth;\n//# sourceMappingURL=auth.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst templates_1 = require(\"./templates\");\nconst TID_SearchTerm = 'term';\nconst TID_Files = 'files';\nconst templateHtml = `\n<div class='mui-container-fluid'>\n    <div class=\"mui--text-center\">\n        <h2>Results for '<span x-id=\"${TID_SearchTerm}\"></span>'</h2>\n        <div x-id=\"${TID_Files}\"></div>\n    </div>\n</div>`;\nexports.filesPanel = {\n    create: () => templates_1.createTemplateInstance(templateHtml),\n    displaySearching: (elements, term) => {\n        elements.term.innerText = term;\n        elements.files.innerHTML = `<div class=\"mui--text-dark-hint\">Searching ...</div>`;\n    },\n    setValues: (elements, values) => {\n        elements.term.innerText = values.term;\n        if (values.files && values.files.length)\n            elements.files.innerHTML = values.files.map(f => `<div class=\"onclick\">${f.name}</div>`).join('');\n        else\n            elements.files.innerHTML = `<div class=\"mui--text-dark-hint\">No results</div>`;\n    },\n};\n//# sourceMappingURL=files-panel.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UiTool = require(\"./ui-tool\");\nconst SearchPanel = require(\"./search-panel\");\nconst FilesPanel = require(\"./files-panel\");\nconst AudioPanel = require(\"./audio-panel\");\nconst Rest = require(\"./rest\");\nconst Auth = require(\"./auth\");\nconst Templates = require(\"./templates\");\nlet contents = [];\nfunction addContent(content) {\n    contents.push(content);\n    UiTool.el('content-wrapper').insertBefore(content, UiTool.el('first-element-after-contents'));\n}\nfunction clearContents() {\n    const contentWrapper = UiTool.el('content-wrapper');\n    contents.forEach(element => contentWrapper.removeChild(element));\n    contents = [];\n}\nconst searchPanel = SearchPanel.searchPanel.create();\nconst filesPanel = FilesPanel.filesPanel.create();\nconst audioPanel = AudioPanel.audioPanel.create();\ndocument.body.appendChild(audioPanel.root);\naddContent(searchPanel.root);\nconst audioJukebox = new AudioPanel.AudioJukebox(audioPanel);\nAuth.autoRenewAuth();\n/**\n * Events\n */\nlet lastDisplayedFiles = null;\nlet lastSearchTerm = null; // HACK very temporary\nsearchPanel.form.addEventListener('submit', async (event) => {\n    UiTool.stopEvent(event);\n    let term = searchPanel.term.value;\n    SearchPanel.searchPanel.displayTitle(searchPanel, false);\n    FilesPanel.filesPanel.displaySearching(filesPanel, term);\n    if (!filesPanel.root.isConnected)\n        addContent(filesPanel.root);\n    let res = await Rest.search(term, 'audio/%');\n    lastDisplayedFiles = res.files;\n    lastSearchTerm = term;\n    FilesPanel.filesPanel.setValues(filesPanel, {\n        term: searchPanel.term.value,\n        files: res.files\n    });\n});\nfilesPanel.root.addEventListener('click', event => {\n    // todo : knownledge to do that is in files-panel\n    let { element, childIndex } = Templates.templateGetEventLocation(filesPanel, event);\n    if (lastDisplayedFiles && element == filesPanel.files && childIndex >= 0 && childIndex < lastDisplayedFiles.length) {\n        audioJukebox.addAndPlay(lastDisplayedFiles[childIndex]);\n        // set an unroller\n        let term = lastSearchTerm;\n        let unrollIndex = childIndex + 1;\n        let files = lastDisplayedFiles;\n        audioJukebox.setItemUnroller({\n            name: () => {\n                if (unrollIndex >= 0 && unrollIndex < files.length)\n                    return `then '${files[unrollIndex].name.substr(0, 20)}' and other '${term}' songs...`;\n                return `finished '${term} songs`;\n            },\n            unroll: () => files[unrollIndex++],\n            hasNext: () => unrollIndex >= 0 && unrollIndex < files.length\n        });\n    }\n});\n//# sourceMappingURL=index.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nasync function afterFetch(response) {\n    if (!response || !response.ok) {\n        console.error(`bad response : ${JSON.stringify(response)}`);\n        return null;\n    }\n    let receivedContentType = response.headers.get('Content-Type') || 'application/json';\n    let sci = receivedContentType.indexOf(';');\n    if (sci >= 0)\n        receivedContentType = receivedContentType.substr(0, sci);\n    if (receivedContentType == 'application/json')\n        return await response.json();\n    else\n        return await response.text();\n}\nfunction getData(url, headers = null) {\n    return fetch(url, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n        headers\n    })\n        .then(afterFetch);\n}\nexports.getData = getData;\nfunction postData(url, data = {}, contentType = 'application/json') {\n    return fetch(url, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n        headers: { \"Content-Type\": contentType },\n        body: contentType == 'application/json' ? JSON.stringify(data) : data\n    })\n        .then(afterFetch);\n}\nexports.postData = postData;\nfunction putData(url, data = {}, contentType = 'application/json') {\n    return fetch(url, {\n        method: 'PUT',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n        headers: { \"Content-Type\": contentType },\n        body: contentType == 'application/json' ? JSON.stringify(data) : data\n    })\n        .then(afterFetch);\n}\nexports.putData = putData;\nfunction deleteData(url, data = {}, contentType = 'application/json') {\n    return fetch(url, {\n        method: 'DELETE',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        redirect: 'follow',\n        referrer: 'no-referrer',\n        headers: { \"Content-Type\": contentType },\n        body: contentType == 'application/json' ? JSON.stringify(data) : data\n    })\n        .then(afterFetch);\n}\nexports.deleteData = deleteData;\n//# sourceMappingURL=network.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Network = require(\"./network\");\nexports.HEXA_BACKUP_BASE_URL = window.location.hostname == \"home.lteconsulting.fr\" ? \"https://home.lteconsulting.fr\" : \"https://localhost:5005\";\nasync function search(searchText, mimeType) {\n    try {\n        let searchSpec = {\n            name: searchText,\n            mimeType: mimeType\n        };\n        const { resultDirectories, resultFilesddd } = await Network.postData(`${exports.HEXA_BACKUP_BASE_URL}/search`, searchSpec);\n        return {\n            directories: resultDirectories,\n            files: resultFilesddd\n        };\n    }\n    catch (err) {\n        return null;\n    }\n}\nexports.search = search;\n//# sourceMappingURL=rest.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst templates_1 = require(\"./templates\");\nconst TID_Title = 'title';\nconst TID_SearchForm = 'form';\nconst TID_SearchTerm = 'term';\nconst templateHtml = `\n<div class='mui-container-fluid'>\n    <div class=\"mui--text-center\">\n        <h1 x-id=\"${TID_Title}\" class=\"animated--quick\">Raccoon</h1>\n        <form x-id=\"${TID_SearchForm}\" class=\"mui-form--inline\">\n            <!--this is a little hack to have things centered-->\n            <div class=\"mui-btn mui-btn--flat\" style=\"visibility: hidden;\">🔍</div>\n            <div class=\"mui-textfield\">\n                <input placeholder=\"Search an audio title\" x-id=\"${TID_SearchTerm}\" type=\"text\" autofocus>\n            </div>\n            <button role=\"submit\" class=\"mui-btn mui-btn--flat\">🔍</button>\n        </form>\n        <br />\n    </div>\n</div>`;\nexports.searchPanel = {\n    create: () => templates_1.createTemplateInstance(templateHtml),\n    displayTitle: (template, displayed) => {\n        if (displayed)\n            template.title.classList.remove('hexa--reduced');\n        else\n            template.title.classList.add('hexa--reduced');\n    }\n};\n//# sourceMappingURL=search-panel.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst UiTools = require(\"./ui-tool\");\nconst elementsData = new WeakMap();\nfunction createElementAndLocateChildren(obj, html) {\n    let root = UiTools.elFromHtml(html);\n    obj['root'] = root;\n    UiTools.els(root, `[x-id]`).forEach(e => obj[e.getAttribute('x-id')] = e);\n    elementsData.set(root, obj);\n    return root;\n}\nexports.createElementAndLocateChildren = createElementAndLocateChildren;\nfunction getTemplateInstanceData(root) {\n    const data = elementsData.get(root);\n    return data;\n}\nexports.getTemplateInstanceData = getTemplateInstanceData;\nfunction createTemplateInstance(html) {\n    let root = createElementAndLocateChildren({}, html);\n    return getTemplateInstanceData(root);\n}\nexports.createTemplateInstance = createTemplateInstance;\nconst EMPTY_LOCATION = { element: null, childIndex: -1 };\nfunction templateGetEventLocation(elements, event) {\n    let els = new Set(Object.values(elements));\n    let c = event.target;\n    let p = null;\n    do {\n        if (els.has(c)) {\n            return {\n                element: c,\n                childIndex: p && Array.prototype.indexOf.call(c.children, p)\n            };\n        }\n        if (c == elements.root)\n            return EMPTY_LOCATION;\n        p = c;\n        c = c.parentElement;\n    } while (c);\n    return EMPTY_LOCATION;\n}\nexports.templateGetEventLocation = templateGetEventLocation;\n//# sourceMappingURL=templates.js.map","﻿\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction el(id) {\n    return document.getElementById(id);\n}\nexports.el = el;\nfunction els(element, selector) {\n    return element.querySelectorAll(selector);\n}\nexports.els = els;\nfunction elFromHtml(html) {\n    const parent = document.createElement('div');\n    parent.innerHTML = html;\n    return parent.children.item(0);\n}\nexports.elFromHtml = elFromHtml;\nfunction stopEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\nexports.stopEvent = stopEvent;\n//# sourceMappingURL=ui-tool.js.map"],"sourceRoot":""}